(self.webpackChunklite=self.webpackChunklite||[]).push([[8953],{59116:(e,t,n)=>{"use strict";n.d(t,{Te:()=>o,_M:()=>r,ed:()=>s});var o=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){return 2===e.type&&1===e.path.length}))},r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},s=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},78067:(e,t,n)=>{"use strict";var o;n.d(t,{r:()=>o}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(o||(o={}))},5399:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var o=n(28655),r=n.n(o);function s(){var e=r()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var i=(0,n(71439).Ps)(s())},51176:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var o=n(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},24745:(e,t,n)=>{"use strict";n.d(t,{E:()=>he});var o=n(63038),r=n.n(o),s=n(67294),i=n(24548),a=n(28309),l=function(e){var t=e.title,n=e.backgroundColor,o=(0,a.Iq)();return s.createElement("div",{className:o((function(){return{color:"white",backgroundColor:n,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px",marginTop:"2px"}}))},t)},u=n(85740),c=n(16528),p=n(98281),d=n(41832),m=n(7530),f=n(64504),v=n(27572),g=n(67297),h=n(93394),b=n(27952),E=n(59713),R=n.n(E),P=n(46829),y=n(12291),x=n(28774),I=n(2074),O=n(32262),S=n(18970),T=n(62630),D=n(85277);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,o=e.response,i=e.parentPost,a=e.hidePopoverMenu,l=(0,c.Hk)().value,u=(0,T.Av)(),p=(0,v.pK)(),d=(0,y.I0)(),f=s.useState(!1),g=r()(f,2),h=g[0],b=g[1],E=function(){return b(!1)},R=null==o||null===(t=o.creator)||void 0===t?void 0:t.id,w=(0,P.useMutation)(x.zu,{variables:{targetUserId:R,userId:null==l?void 0:l.id},update:function(e){var t={postId:i.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:I.g,variables:t}),o=j(n,R);null!==o&&e.writeQuery({query:I.g,data:o,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:R,isBlocking:!0}},onCompleted:function(){E(),d((0,D.Dx)({message:"Responses by this user have been hidden from this story."}))}}),C=r()(w,1)[0],k=null===(n=i.creator)||void 0===n?void 0:n.id,_=(null==l?void 0:l.id)===k;return(null==l?void 0:l.id)===R?null:l&&R&&_?s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){b(!0)}},"Block this author")),h&&s.createElement(S.Z,{onConfirm:function(){u.event("user.blocked",{userId:R,source:p}),C()},isVisible:h,isInResponsesSidebar:!0,hide:function(){E(),a()}})):null},j=function(e,t){var n,o=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||null==o||!o.responsesConnection||null===(null==o?void 0:o.count))return null;var r=o.responsesConnection.stream,s=r.filter((function(e){var n,o;return(null===(n=e.itemType.post)||void 0===n||null===(o=n.creator)||void 0===o?void 0:o.id)!==t}));if(s.length===r.length)return null;var i=r.length-s.length;return C(C({},e),{},{post:C(C({},e.post),{},{postResponses:C(C({},o),{},{count:o.count-i,responsesConnection:C(C({},o.responsesConnection),{},{stream:s})})})})},_=n(28655),A=n.n(_),M=n(71439),B=n(14267),N=n(43522),L=n(54260);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e,t){var n,o,r,s,i=e;return i&&null!==(n=i.threadedPostResponses)&&void 0!==n&&null!==(o=n.posts)&&void 0!==o&&o.some((function(e){return e.id===t}))?Q(Q({},i),{},{postResponses:{count:((null===(r=i.postResponses)||void 0===r?void 0:r.count)||1)-1},threadedPostResponses:Q(Q({},i.threadedPostResponses),{},{posts:((null===(s=i.threadedPostResponses)||void 0===s?void 0:s.posts)||[]).filter((function(e){return e.id!==t}))})}):null},H=function(e){var t=e.isDialogOpen,n=e.dialogHeading,o=e.dialogDescription,r=e.cancelDialogAction,i=e.confirmDialogAction,a=e.confirmDialogButtonText,l=e.confirmButtonStyle,u=void 0===l?"STRONG":l,c=e.hide,p=void 0===c?function(){}:c,d=s.useContext(B.D).sidebarRef,v=function(e){var t;null!=d&&null!==(t=d.current)&&void 0!==t&&t.style&&(d.current.style.overflowY=e?"hidden":"")};return s.useEffect((function(){return v(t),function(){v(!1)}}),[t]),s.createElement(m.Vq,{isVisible:t,hide:p,withCloseButton:!1,noPortal:!0,padding:50},s.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},s.createElement(f.X6,{scale:"M"},n),s.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},s.createElement(f.F,{scale:"M",color:"DARKER"},o)),s.createElement(m.xu,{display:"flex",marginBottom:"20px"},s.createElement(m.rU,{onClick:r},s.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),s.createElement(m.xu,{marginLeft:"25px"},s.createElement(m.zx,{buttonStyle:u,onClick:i,"data-test-id":"close-discussion-button"},a)))))},V=n(14391),$=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction,r=e.responseDistribution,i=e.hide,a=r===V.Et.DISTRIBUTED,l=a?"Delete response and story":"Delete",u=a?"This response is also a story on your profile. Are you sure you want to delete this response?":s.createElement("div",null,"Deleted responses are gone forever.",s.createElement("br",null),"Are you sure?");return s.createElement(H,{isDialogOpen:t,dialogHeading:l,dialogDescription:u,cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:i})};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(){var e=A()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return Z=function(){return e},e}var z=(0,M.Ps)(Z()),W=function(e){var t,n,o=e.response,i=e.hidePopoverMenu,a=s.useState(!1),l=r()(a,2),u=l[0],p=l[1],d=(0,T.Av)(),f=(0,v.pK)(),g=(0,y.I0)(),h=(0,c.Hk)().value,b=s.useContext(L.H).inResponseToPostId,E=(0,P.useMutation)(z,{variables:{responseId:o.id},update:function(e){var t,n=e.readFragment({id:"Post:".concat(b),fragment:N.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"});null!==(t=F(n,o.id))&&(e.writeFragment({id:"Post:".concat(b),fragment:N.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:q({},t)}),d.event("responses.removed",{postId:o.id,source:f}),g((0,D.Dx)({message:"Successfully deleted response."})),i())}}),R=r()(E,1)[0],x=s.useContext(B.D).sidebarRef;return null!=h&&h.id&&(null==h?void 0:h.id)===(null===(t=o.creator)||void 0===t?void 0:t.id)?(null!=x&&x.current&&(n=x.current.scrollTop),s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){return p(!0)}},"Delete")),u&&s.createElement($,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=x&&x.current&&(x.current.scrollTop=n)},confirmDialogAction:R,responseDistribution:o.responseDistribution,hide:function(){return p(!1)}}))):null},G=n(51176),Y=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction;return s.createElement(H,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},J=function(e){var t,n,o=e.response,i=(0,c.Hk)().value,a=s.useState(!1),l=r()(a,2),u=l[0],p=l[1],d=s.useContext(G.Q),f=d.setIsEditing,v=d.isEditing,g=d.setEditingQuote,h=(null===(t=o.creator)||void 0===t?void 0:t.id)===(null==i?void 0:i.id),b=s.useContext(B.D).sidebarRef;if(null!=b&&b.current&&(n=b.current.scrollTop),!h)return null;var E=o.responseDistribution===V.Et.DISTRIBUTED;return s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){E?p(!0):(o.inResponseToMediaResource&&g(o.inResponseToMediaResource.mediumQuote),f(!v))}},"Edit this response")),u&&s.createElement(Y,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=n)},confirmDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=n),o.inResponseToMediaResource&&g(o.inResponseToMediaResource.mediumQuote),f(!v)}}))};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(){var e=A()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return te=function(){return e},e}var ne=(0,M.Ps)(te()),oe=function(e){var t,n,o,i=e.responseToBeHidden,a=e.parentPost,l=e.hidePopoverMenu,u=(0,c.Hk)().value,p=(0,y.I0)(),d=(0,T.Av)(),f=(0,v.pK)(),g=s.useContext(L.H).inResponseToPostId,h=g,b=(null==u?void 0:u.id)===(null===(t=a.creator)||void 0===t?void 0:t.id),E=null==a||null===(n=a.collection)||void 0===n?void 0:n.viewerIsEditor,R=(null==u?void 0:u.id)===(null===(o=i.creator)||void 0===o?void 0:o.id),x=(0,P.useMutation)(ne,{variables:{postResponseId:i.id,parentPostId:h},update:function(e){var t,n=e.readFragment({id:"Post:".concat(g),fragment:N.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"});null!==(t=F(n,i.id))&&(e.writeFragment({id:"Post:".concat(g),fragment:N.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:ee({},t)}),d.event("response.hidden",{postId:i.id,source:f}),p((0,D.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:i.id,parentPostId:h}})),l())}}),I=r()(x,1)[0];return R?null:b||E?s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:I},"Hide this response")):null},re=n(33241),se=n(62181),ie=n(90639),ae=function(e){var t,n=e.response,o=e.parentPost,i=e.hidePopoverMenu,a=(0,c.Hk)().value,l=(0,T.Av)(),u=(0,v.pK)(),p=s.useState(!1),d=r()(p,2),f=d[0],g=d[1],h=function(e){var t,n,o=e.response,i=o.id,a=null===(t=o.creator)||void 0===t?void 0:t.id,l=null===(n=o.creator)||void 0===n?void 0:n.isBlocking,u=(0,y.I0)(),c=(0,P.useMutation)(re.g,{variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){u((0,D.Dx)({message:"Successfully reported post."}))}}),p=r()(c,2),d=p[0],m=p[1];return{reportStory:s.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,o=e.reportReason;return d({variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:n,reason:void 0===o?"Spam":o},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:a,isBlocking:l||n}}})}),[o,d]),error:null==m?void 0:m.error,loading:null==m?void 0:m.loading}}({response:n}).reportStory,b=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||b?null:s.createElement(s.Fragment,null,s.createElement(O.Sl,null,null!=a&&a.id?s.createElement(m.rU,{onClick:function(){return g(!0)}},"Report this response"):s.createElement(se.R9,{operation:"register",post:o,susiEntry:"respond_sidebar"},"Report this response")),s.createElement(ie.Z,{onSubmit:function(e,t){return l.event("response.flagged",{postId:n.id,reason:t,source:u}),h({alsoBlockAuthor:e,reportReason:t})},isVisible:f,hide:function(){g(!1),i()},isResponse:!0}))},le=n(965),ue=n(65347),ce=n(55573),pe=function(e){var t=e.response,n=e.hidePopoverMenu,o=(0,le.CP)(),r=(0,T.Av)(),i=(0,c.Hk)().value,a=(0,v.pK)(),l=(0,g.b)((function(e){return e.multiVote.clapsPerPost})),u=(0,y.I0)(),p=s.useCallback((function(e){return u((0,ue.at)(e))}),[u]),d=(0,ce.l)(l,t),f=d.clapCount,h=d.viewerClapCount;return null!=i&&i.id&&0!==f&&0!==h?s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){o(t,(null==i?void 0:i.id)||"",-h),p({postId:t.id,clapCount:f-h,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),r.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:h,source:a}),n()}},"Undo applause for this response")):null},de=n(26912),me=n(6688),fe={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},ve=function(e){var t=e.response,n=e.responseType,o=e.parentPost,r=e.isPopoverMenuVisible,i=e.hidePopoverMenu,a=(0,me.I)(),l=t.creator,u=s.useRef(null);return s.useEffect((function(){var e=function(e){var t;null!=u&&null!==(t=u.current)&&void 0!==t&&t.contains(e.target)||i()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),t&&l?s.createElement("div",{className:a(fe),ref:u},s.createElement(O.mX,null,s.createElement(ae,{response:t,parentPost:o,hidePopoverMenu:i}),s.createElement(oe,{responseToBeHidden:t,parentPost:o,hidePopoverMenu:i}),s.createElement(k,{response:t,parentPost:o,hidePopoverMenu:i}),n===de.Q.SIMPLE&&s.createElement(pe,{response:t,hidePopoverMenu:i}),n===de.Q.SIMPLE&&s.createElement(J,{response:t}),s.createElement(W,{response:t,hidePopoverMenu:i}))):null},ge=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},he=function(e){var t,n=e.response,o=e.responseType,E=e.parentPost,R=(0,c.Hk)().value,P=(0,a.Iq)(),y=(0,a.Fg)(),x=n.creator,I=n.mediumUrl,O=n.createdAt,S=s.useState(!1),T=r()(S,2),D=T[0],w=T[1],C=(0,g.v)((function(e){return e.config.authDomain}));if(!n||!x||!I)return null;var k=(null===(t=E.creator)||void 0===t?void 0:t.id)===x.id,j=(null==R?void 0:R.id)===x.id,_=function(e,t){return e&&t===de.Q.SIMPLE}(n,o)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt),A=s.createElement(m.rU,{href:(0,b.AWr)(x,C)},s.createElement(f.F,{scale:"M",color:"DARKER"},x.name));return s.createElement(s.Fragment,null,s.createElement(m.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s.createElement(m.xu,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(p.ZP,{scale:"XS",user:x}),s.createElement(m.xu,{paddingLeft:"12px"},s.createElement(m.xu,{display:"flex",flexDirection:"row"},s.createElement(u.bZ,{name:"enable_author_cards_byline",placeholder:function(){return A}},(function(e){return e?s.createElement(m.$W,{placement:"top",targetDistance:15,mouseLeaveDelay:200,popoverRenderFn:function(){return s.createElement(d.ZP,{user:x})}},s.createElement(m.rU,{href:(0,b.AWr)(x,C)},s.createElement(f.F,{scale:"M",color:"DARKER"},x.name))):A})),k?s.createElement(l,{title:"AUTHOR",backgroundColor:y.brandColor.sage.dark}):j?s.createElement(l,{title:"YOU",backgroundColor:"#A8A8A8"}):null),s.createElement(m.rU,{href:I,linkStyle:"SUBTLE",inline:!0,noFollow:!0},s.createElement(f.F,{scale:"M"},s.createElement(i.Z,{timestamp:O}),_&&s.createElement(s.Fragment,null," (edited)"))))),s.createElement(m.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),w(!D)},inline:!0,className:P(ge)},s.createElement(h.Z,null))),D&&s.createElement("div",{className:P({position:"relative"})},s.createElement(v.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},s.createElement(ve,{response:n,responseType:o,parentPost:E,isPopoverMenuVisible:D,hidePopoverMenu:function(){return w(!1)}}))))}},13787:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var o=n(28655),r=n.n(o),s=n(71439),i=n(98281);function a(){var e=r()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      isBlocking\n    }\n    mediumUrl\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,s.Ps)(a(),i.WQ)},51151:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,u:()=>b});var o=n(28655),r=n.n(o),s=n(59713),i=n.n(s),a=n(71439),l=n(67294),u=n(19692),c=n(28309),p=n(14391),d=n(58357),m=n(83024);function f(){var e=r()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.inResponseToMediaResource,n=(0,c.Iq)(),o=(0,c.Fg)(),r=(0,d.r)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var o=n.split("--")[0];if(o){var r=document.getElementById(o);if(r){var s=(null==r?void 0:r.offsetTop)-100;s&&window.scrollTo({top:s,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),s=null==t?void 0:t.mediumQuote;if(!s)return null;var i=(0,m.eu)(s);if(!i||!i.type)return null;var a=i.type;return a===p.NJ.IMG||a===p.NJ.IFRAME||a===p.NJ.COVER_TITLE||a===p.NJ.HR||a===p.NJ.MIXTAPE_EMBED||a===p.NJ.SECTION_CAPTION?null:l.createElement("div",{onClick:r,onKeyDown:r,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:o.backgroundColor})},l.createElement(u.ZP,{paragraph:g(g({},i),{},{name:"embedded-quote-".concat(s.quoteId,"-").concat(i.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},b=(0,a.Ps)(f(),m.Sz,u.Rg)},14267:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var o=n(67294),r=n(14391),s=o.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null},sidebarRef:null,responseDistribution:r.Et.NOT_DISTRIBUTED,setResponseDistribution:function(){},rootPostId:"",isResponsesSidebarVisible:!1})},2074:(e,t,n)=>{"use strict";n.d(t,{A:()=>R,g:()=>E});var o=n(28655),r=n.n(o),s=n(71439),i=n(8011),a=n(43522),l=n(41832),u=n(15699),c=n(27952),p=n(13787),d=n(51151);function m(){var e=r()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        isBlocking\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      responseDistribution\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),p.F,u.h,d.u,c.$mN,l.OJ),v=n(58992),g=n(31078);function h(){var e=r()(["\n  query PagedThreadedPostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      responsesCount\n      postResponses {\n        count\n      }\n      responseRootPost {\n        post {\n          id\n        }\n        responseDepth\n      }\n      threadedPostResponses(paging: $postResponsesPaging) {\n        __typename\n        autoExpandedPostIds\n        pagingInfo {\n          next {\n            limit\n            to\n          }\n        }\n        posts {\n          ... on Post {\n            ...StoryResponse_threadedStoryResponse_post\n            ...SimpleResponse_threadedSimpleResponse_post\n            ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function b(){var e=r()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return b=function(){return e},e}var E=(0,s.Ps)(b(),g.Z,f,i.y),R=(0,s.Ps)(h(),g.Z,a.D,v.t,a.K)},72558:(e,t,n)=>{"use strict";n.d(t,{OT:()=>A,sG:()=>j});var o=n(63038),r=n.n(o),s=n(67294),i=n(2277),a=n(24745),l=n(51151),u=n(14267),c=n(39382),p=n(59713),d=n.n(p),m=n(99046),f=n(54260),v=n(80471),g=n(53976),h=n(7530),b=n(64504),E=n(62630),R=n(27572),P=n(28309);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var x=s.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const I=function(e){return s.createElement("svg",y({width:29,height:29},e),x)};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.response,n=t.postResponses,o=t.id,r=(null==n?void 0:n.count)||0,i=s.useContext(f.H),a=i.inResponseToPostId,l=i.isThreadedResponsesVisible,c=i.toggleThreadedResponses,p=i.threadDepthOnPage,d=i.toggleCreateReply,y=i.loadThreadedResponses,x=i.isThreadedResponsesQueryCalled,O=i.showContinueThisThreadSidebar,T=i.threadDepthFromRootPost,D=s.useContext(u.D).rootPostId,w=(0,E.Av)(),C=(0,R.pK)(),k=(0,P.Iq)(),j=function(e){return{fill:e.baseColor.fill.normal,height:"25px",width:"25px"}},_=!!(0,g.V)({name:"enable_lite_continue_this_thread",placeholder:!1}),A=p>=v.y,M=function(e,t){return s.createElement(h.xu,{display:"flex",alignItems:"center"},s.createElement(I,{className:k(j),"aria-label":"responses"}),s.createElement(h.xu,{tag:"div",marginLeft:"8px",marginTop:"2px"},s.createElement(b.F,{color:e,tag:"p",scale:"M"},t)))},B={postId:o,parentPostId:a,rootPostId:D,threadDepth:T,source:C},N=t.mediumUrl?s.createElement(h.rU,{linkStyle:"SUBTLE",href:t.mediumUrl},M("ACCENT","Continue this thread")):null,L=_?s.createElement(h.rU,{linkStyle:"SUBTLE",onClick:function(){O(),w.event("response.continue",S({},B))}},M("ACCENT","Continue this thread")):N;return s.createElement(h.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},s.createElement(h.xu,{display:"flex",alignItems:"center"},s.createElement(m.S,{buttonStyle:"SUBTLE_THREADED_RESPONSE",post:t,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),s.createElement(h.xu,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},A?L:r>0&&s.createElement(h.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){e?w.event("response.collapsed",S({},B)):e||w.event("response.expanded",S({},B))}(l),c()}},M("DARKER",function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(r,l))))),!A&&s.createElement(h.xu,{paddingRight:"6px"},s.createElement(b.F,{color:"DARKER",scale:"M"},s.createElement(h.rU,{onClick:function(){x||y(),d()},inline:!0},"Reply"))))},D=n(26912),w=n(72955),C=n(15699),k=n(29035),j=function(e){return e.join("").length>320?"char":e.join("\n").split("\n").length>c._W?"line":"none"},_=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},A=function(e){var t,n=e.simpleResponse,o=e.parentPost,p=e.omitBottomBorder,d=n.creator,m=n.content,f=n.mediumUrl,v=s.useState(!1),g=r()(v,2),E=g[0],R=g[1],y=s.useRef(null),x=(0,P.Iq)(),I=s.useContext(u.D).sidebarRef;(0,w.Vj)(y,n,I);var O=null==m||null===(t=m.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(d&&m&&O&&f))return null;var S=O.map((function(e){return e.text||""})),A=j(S),M="none"!==A,B=M&&!E,N=(0,k.ic)(navigator&&navigator.userAgent);return s.createElement(C.Z,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!M},s.createElement(h.xu,{paddingTop:"25px",paddingBottom:N&&p?"48px":"16px",borderBottom:p?void 0:"BASE_LIGHTER",ref:y},s.createElement(a.E,{response:n,responseType:D.Q.SIMPLE,parentPost:o}),s.createElement(l.J,{inResponseToMediaResource:n.inResponseToMediaResource}),s.createElement(h.xu,{marginTop:"5px"},s.createElement(i.c.Provider,{value:!0},s.createElement(c.YN,{paragraphs:O,truncateStrategy:A,isExpanded:E}))),B&&s.createElement("button",{onClick:function(){return R(!0)},className:x(_)},s.createElement(b.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),s.createElement(T,{response:n})))}},39382:(e,t,n)=>{"use strict";n.d(t,{_W:()=>f,YN:()=>g});var o=n(59713),r=n.n(o),s=n(67294),i=n(3011),a=n(7530),l=n(64504),u=n(28309),c=n(14391),p=n(50993);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=5;function v(e,t,n){return"char"===e&&t>250||"line"===e&&n>f}function g(e){var t=e.paragraphs,n=e.truncateStrategy,o=e.isExpanded,r=(0,u.Iq)(),d=0,f=0,g="none"!==n&&!o;return s.createElement("pre",{className:r({whiteSpace:"pre-wrap"})},t.map((function(e){if(!o&&v(n,d,f))return null;var t=(null==e?void 0:e.text)||"";d+=t.length||0,f+=t.split("\n").length||0;var u=m(m({},e),{},{dropCapImage:null,hasDropCap:null}),h=!o&&v(n,d,f);if(h&&"char"===n){var b=250-(d-t.length||0);u.markups=u.markups.reduce((function(e,t){if(t.start<b){var n=m({},t);n.end>b&&(n.end=b),e.push(n)}return e}),[]),u.text=(0,p.N8)(t,b)}return s.createElement(a.xu,{padding:"5px 0px",key:e.name||e.id},s.createElement(l.F,{scale:"M",color:"DARKER",tag:"div"},s.createElement("div",{className:r({lineHeight:"24px"})},s.createElement(i.T2,{paragraph:u,richTextStyle:"FULL_PAGE",paragraphStyle:c.NJ.P}),g&&h&&"...")))})).filter((function(e){return!!e})))}},8011:(e,t,n)=>{"use strict";n.d(t,{y:()=>d});var o=n(28655),r=n.n(o),s=n(71439),i=n(5399),a=n(51151),l=n(41832),u=n(72955),c=n(27952);function p(){var e=r()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        isBlocking\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      viewerClapCount\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      responseDistribution\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.h_,u.kH,a.u,i.I,c.$mN,l.OJ)},43522:(e,t,n)=>{"use strict";n.d(t,{D:()=>f,K:()=>v});var o=n(28655),r=n.n(o),s=n(71439),i=n(5399),a=n(51151),l=n(58992),u=n(41832),c=n(72955),p=n(27952);function d(){var e=r()(["\n  fragment SimpleResponse_threadedSimpleResponse_defaultPostResponses on Post {\n    responsesCount\n    postResponses {\n      count\n    }\n    threadedPostResponses(paging: {limit: 10}) {\n      __typename\n      autoExpandedPostIds\n      pagingInfo {\n        next {\n          limit\n          to\n        }\n      }\n      posts {\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse_post\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function m(){var e=r()(["\n  fragment SimpleResponse_threadedSimpleResponse_post on Post {\n    id\n    createdAt\n    firstPublishedAt\n    latestPublishedAt\n    title\n    creator {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      isBlocking\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n    viewerClapCount\n    isPublished\n    voterCount\n    responsesCount\n    postResponses {\n      count\n    }\n    allowResponses\n    latestRev\n    recommenders {\n      id\n      name\n    }\n    mediumUrl\n    content {\n      bodyModel {\n        paragraphs {\n          text\n        }\n        ...getSlateBodyFromPostBodyModel_bodyModel\n      }\n    }\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    inResponseToType\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),c.h_,c.kH,a.u,i.I,p.$mN,u.OJ),v=(0,s.Ps)(d(),l.t,f)},58992:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var o=n(28655),r=n.n(o),s=n(71439),i=n(41832),a=n(15699),l=n(27952),u=n(13787),c=n(51151);function p(){var e=r()(["\n  fragment StoryResponse_threadedStoryResponse_post on Post {\n    id\n    responsesCount\n    postResponses {\n      count\n    }\n    creator {\n      isBlocking\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n\n    previewContent {\n      bodyModel {\n        paragraphs {\n          text\n          type\n        }\n      }\n    }\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...ResponseHeader_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.F,a.h,c.u,l.$mN,i.OJ)},54260:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var o=n(67294).createContext({inResponseToPostId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){},showThreadedResponses:function(){},threadDepthFromRootPost:0,threadDepthOnPage:0,hideCreateReply:function(){},toggleCreateReply:function(){},loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:function(){}})},9471:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var o=n(87757),r=n.n(o),s=n(48926),i=n.n(s),a=n(67294),l=n(12291),u=n(59116),c=n(78067),p=n(14267),d=n(54260),m=n(30049),f=n(319),v=n.n(f),g=n(59713),h=n.n(g),b=n(28655),E=n.n(b),R=n(71439),P=n(80439),y=n(43522),x=n(58992);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(){var e=E()(["\n  mutation publishPostThreadedResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n    $responseDistribution: ResponseDistributionType\n  ) {\n    publishPostThreadedResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n      responseDistribution: $responseDistribution\n    ) {\n      id\n      ... on Post {\n        ...StoryResponse_threadedStoryResponse_post\n        ...SimpleResponse_threadedSimpleResponse_post\n        ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return S=function(){return e},e}var T=(0,R.Ps)(S(),y.D,x.t,y.K),D=function(e){var t=e.children,n=e.parentPostId;return a.createElement(P.mm,{mutation:T,update:function(e,t){var o=function(e,t){if(!t||!e.data)return null;var n=e.data.publishPostThreadedResponse;return O(O({},t),{},{postResponses:{count:t.postResponses.count+1},threadedPostResponses:O(O({},t.threadedPostResponses),{},{posts:[n].concat(v()(t.threadedPostResponses.posts))})})}(t,e.readFragment({id:"Post:".concat(n),fragment:y.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}));null!==o&&e.writeFragment({id:"Post:".concat(n),fragment:y.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:O({},o)})}},(function(e,n){return t({publishResponse:e,loading:n.loading,error:n.error})}))};function w(){var e=E()(["\n  mutation savePostResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    savePostResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      ... on Post {\n        id\n      }\n    }\n  }\n"]);return w=function(){return e},e}var C=(0,R.Ps)(w()),k=function(e){var t=e.children;return a.createElement(P.mm,{mutation:C},(function(e){return t({saveResponse:e})}))},j=n(19537),_=n(18608),A=n(64504),M=n(62630),B=n(27572),N=n(28309),L=n(14391),U=n(85277),Q=function(e){var t=e.parentPostId,n=e.placeholder,o=e.hideReplyEditing,s=void 0===o?function(){}:o,f=e.editorOpenByDefault,v=void 0===f||f,g=e.showEditorHeader,h=void 0===g||g,b=a.useContext(p.D),E=b.setIsSavingResponse,R=b.responsesLocked,P=b.inResponseToQuote,y=b.setInResponseToQuote,x=b.responseDistribution,I=b.setResponseDistribution,O=b.rootPostId,S=a.useContext(d.H),T=S.showThreadedResponses,w=S.isThreadedResponsesQueryLoading,C=S.threadDepthFromRootPost,Q=function(){x===L.Et.DISTRIBUTED?I(L.Et.NOT_DISTRIBUTED):I(L.Et.DISTRIBUTED)},F=(0,B.pK)(),H=(0,M.Av)(),V=(0,l.I0)(),$=(0,N.Iq)(),K=a.useRef(null);a.useEffect((function(){var e;null!=K&&null!==(e=K.current)&&void 0!==e&&e.getBoundingClientRect&&K.current.getBoundingClientRect().bottom>window.innerHeight&&K.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var q=function(e){return function(){var n=i()(r().mark((function n(o,s){var i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{inResponseToPostId:t,deltas:o,inResponseToQuoteId:null==P?void 0:P.id}});case 2:i=n.sent,s(i.data.savePostResponse.id);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};return a.createElement(D,{parentPostId:t},(function(e){var o=e.publishResponse,l=e.loading,p=e.error;return(0,u._M)(p)||R?(E(!1),a.createElement(m.R,{message:_.x})):a.createElement(k,null,(function(e){var p,d=e.saveResponse;return a.createElement("div",{ref:K},a.createElement(A.F,{scale:"M",color:"DARKER",tag:"div"},a.createElement("div",{className:$({lineHeight:"24px"})},a.createElement(_.j,{postId:t,isPublishingResponse:l,publishResponse:(p=o,function(e,n){return E(!0),p({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:null==P?void 0:P.id,responseDistribution:x}}).then((function(e){var o=e.data&&e.data.publishPostThreadedResponse,r=(0,u.ed)(e.errors);if(o)return H.event("inlineEditor.publish",{postId:t,context:c.r.INLINE_POST_RESPONSE,source:F}),H.event("response.created",{postId:o.id,parentPostId:t,rootPostId:O,threadDepth:C+1,context:c.r.INLINE_POST_RESPONSE,source:F}),o.responseDistribution===L.Et.DISTRIBUTED&&H.event("response.distributed",{postId:o.id,parentPostId:t,rootPostId:O,threadDepth:C+1,context:c.r.INLINE_POST_RESPONSE,source:F}),E(!1),T(),x===L.Et.DISTRIBUTED&&(V((0,U.Dx)({message:"",toastStyle:"PUBLISH_RESPONSE",extraParams:{response:o},duration:5e3})),I(L.Et.NOT_DISTRIBUTED)),n();r&&(E(!1),V((0,U.Dx)({message:"You’ve reached the limit for stories that can be published in one day. Please try again tomorrow.",toastStyle:"ERROR"})))}))}),saveResponse:q(d),type:j.H.create,inResponseToQuote:P,onClose:i()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(void 0),s(),e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)}))),editorOpenByDefault:v,placeholder:n,showEditorHeader:h,disableReplyButton:w,showPublishCheckbox:!v,responseDistribution:x,toggleResponseDistribution:Q}))))}))}))}},30049:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var o=n(67294),r=n(7530),s=n(64504),i=n(27952),a=function(e){var t=e.message||"The author has closed discussion for this story.";return o.createElement(r.xu,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},o.createElement(s.F,{scale:"M",tag:"span",color:"DARKER"},t," ",o.createElement(r.rU,{href:(0,i.VGH)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},19537:(e,t,n)=>{"use strict";var o;n.d(t,{H:()=>o}),function(e){e.edit="EDIT",e.create="CREATE"}(o||(o={}))},18608:(e,t,n)=>{"use strict";n.d(t,{x:()=>Y,j:()=>oe});var o=n(63038),r=n.n(o),s=n(87757),i=n.n(s),a=n(48926),l=n.n(a),u=n(59713),c=n.n(u),p=n(67294),d=n(84792),m=n(10143),f=n(26600),v=n(25772),g=n(78067),h=n(22470),b=n(54803),E=n(9735),R=n(24548),P=n(42963),y=n(32262),x=n(7530),I=n(28309),O=n(74465),S=n(93394),T=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}},D=function(e){var t=e.isEdit,n=e.saveResponse,o=e.setDraftResponseId,r=(0,I.Iq)(),s="editorPopoverMenu";return p.createElement(x.Bn,null,(function(e){var i=e.isVisible,a=e.toggle,l=e.hide;return p.createElement(x.J2,{ariaId:s,isVisible:i,hide:l,customZIndex:O.ZP.responseSidebarPopover,noArrow:!0,placement:"bottom-end",popoverRenderFn:function(){return p.createElement(y.mX,null,p.createElement(y.Sl,null,p.createElement(x.rU,{onClick:t&&o?o:n,"data-testid":"saveResponseMenuItem"},"Make this response a story")))}},p.createElement(x.rU,{ariaControls:s,ariaExpanded:i?"true":"false",onClick:a,className:r(T),"data-testid":"editorMenu"},p.createElement(S.Z,null)))}))},w=n(19692),C=n(14391),k=n(83024),j=function(e){var t=e.quote,n=(0,I.Iq)();if(!t)return null;var o=(0,k.eu)(t);return o?p.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},p.createElement(w.ZP,{paragraph:o,paragraphStyle:C.NJ.P,spaceTop:4,richTextStyle:"STREAM"})):null},_=function(e){var t=e.onFocus,n=e.responseContent,o=e.setResponseContent,r=e.setIsEmpty,s=e.isEditorOpen,i=(0,I.Iq)();return p.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;r(!t),o(t)},onFocus:t,className:i({width:"100%",padding:"14px",resize:"none",minHeight:s?"100px":"0",height:s?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},A=n(19537),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,o=[],r=e.split("\n");return n&&(o=[{type:8,index:0,section:{name:B(),startIndex:0}}]),r.forEach((function(e,t){o.push({type:1,paragraph:{markups:[],name:B(),text:e,type:1},verifySameName:!1,index:t})})),o},B=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},N=n(16528),L=n(62181),U=n(98281),Q=n(42933),F=n(36544),H=function(e){var t=e.isVisible,n=e.hide,o=(0,N.Hk)().value;return p.createElement(F.C,null,(function(e){var r=e.mutate;return p.createElement(x.QH,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){r()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==o?void 0:o.unverifiedEmail,".")}))},V=n(64504),$=n(62630),K=n(27572),q=n(67297),Z=n(27952),z=n(29035);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y="The author has closed discussion for this story. We are unable to save changes to your response.",J=function(){return{"& button":{border:"none"}}},X="400ms",ee="300ms",te=function(e,t){var n=G(G({},t),{},{display:"flex",padding:"0 14px"});return G(G({},n),{},e?{transition:"opacity ".concat(X,", max-height ").concat(X),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(X,", max-height ").concat(X),opacity:0,maxHeight:0})},ne=function(e){return e?{transition:"min-height ".concat(X),minHeight:"100px"}:{transition:"min-height ".concat(X),minHeight:"15px"}},oe=function(e){var t,n=e.postId,o=e.responseId,s=e.createdAt,a=e.isPublishingResponse,u=e.disableReplyButton,c=void 0!==u&&u,y=e.publishResponse,O=e.saveResponse,S=void 0===O?function(){return Promise.resolve()}:O,T=e.type,w=void 0===T?A.H.create:T,k=e.onClose,B=void 0===k?l()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):k,F=e.inResponseToQuote,W=e.initialValue,Y=e.placeholder,oe=void 0===Y?"What are your thoughts?":Y,re=e.editorOpenByDefault,se=void 0!==re&&re,ie=e.showEditorHeader,ae=void 0===ie||ie,le=e.showPublishCheckbox,ue=void 0!==le&&le,ce=e.responseDistribution,pe=void 0===ce?C.Et.NOT_DISTRIBUTED:ce,de=e.toggleResponseDistribution,me=void 0===de?function(){}:de,fe=w===A.H.edit,ve=(0,I.Iq)(),ge=(0,$.Av)(),he=(0,K.pK)(),be=(0,z.rO)(navigator.userAgent),Ee=w===A.H.edit,Re=(0,f.c)().value,Pe=(0,E.Vz)([E.Fm]),ye=Pe.editor,xe=Pe.renderLeaf,Ie=Pe.renderElement,Oe=p.useState(fe||se),Se=r()(Oe,2),Te=Se[0],De=Se[1],we=p.useState(!0),Ce=r()(we,2),ke=Ce[0],je=Ce[1],_e=p.useState((t=W)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),Ae=r()(_e,2),Me=Ae[0],Be=Ae[1],Ne=p.useState(void 0),Le=r()(Ne,2),Ue=Le[0],Qe=Le[1],Fe=p.useState(!1),He=r()(Fe,2),Ve=He[0],$e=He[1],Ke=p.useCallback((function(){return $e(!1)}),[]),qe=(0,q.v)((function(e){return e.config.authDomain})),Ze=(0,N.Hk)().value,ze=p.useCallback((function(){B().then((function(e){e.preventStateUpdate||(De(!1),be?Be(""):(0,b.oe)(ye))}))}),[De]);if(p.useEffect((function(){F&&De(!0)}),[F]),p.useEffect((function(){je(d.Node.string(ye).toString().trim().length<=0)}),[Re]),p.useEffect((function(){Te&&!be&&(se||Ee||m.F3.blur(ye),setTimeout((function(){return m.F3.focus(ye)}),0))}),[Te]),Ue)return ge.event("inlineEditor.expand",{postId:n,context:g.r.INLINE_POST_RESPONSE,source:he}),p.createElement(P.Z,{to:(0,Z.d0A)(qe,Ue)});var We,Ge,Ye=p.createElement(p.Fragment,null,!ue&&p.createElement("div",{className:ve(J)},p.createElement(x.zx,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return ze()}},"Cancel")),p.createElement(x.zx,{buttonStyle:"STRONG",size:"SMALL",disabled:ke||a||d.Node.string(ye)===Me||c,onClick:function(){var e=be?M(Me,fe?{includeInitialDeltas:!1}:void 0):(0,b.wB)(ye,fe?{includeInitialDeltas:!1}:void 0);null!=Ze&&Ze.unverifiedEmail?$e(!0):y(e,ze)}},fe?"Update":"Respond"));return p.createElement(Q.Z,{marginBottom:se?"0":"20px",padding:fe?"0":"0 24px",paddingTop:se?"0":"20px"},p.createElement("div",{className:ve({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:Te?"14px":"0",paddingBottom:Te?"14px":"0",transition:"padding-top ".concat(X,", padding-bottom ").concat(X)})},Ze&&ae&&p.createElement("div",{className:ve((We=Te,Ge={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},G(G({},Ge),{},We?{transition:"opacity ".concat(X,", max-height ").concat(X,", margin-bottom ").concat(X),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(ee,", max-height ").concat(ee,", margin-bottom ").concat(ee),opacity:0,maxHeight:0,marginBottom:"0"})))},p.createElement(Q.Z,{display:"flex",alignItems:"center"},p.createElement(U.ZP,{scale:"XS",user:Ze}),p.createElement(Q.Z,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},p.createElement(V.F,{scale:"M",color:"DARKER"},Ze.name),fe&&s&&p.createElement(V.F,{scale:"M",color:"LIGHTER"},p.createElement(R.Z,{timestamp:s})))),Te&&!ue&&p.createElement(Q.Z,{display:"flex",justifyContent:"flex-end"},p.createElement(D,{isEdit:fe,setDraftResponseId:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Qe(o)})),saveResponse:function(){var e=be?M(Me):(0,b.wB)(ye);return S(e,Qe)}}))),Te&&p.createElement(j,{quote:F}),p.createElement(Q.Z,{display:"flex",flexDirection:"column"},Ze?p.createElement("div",{className:ve(ne(Te))},be?p.createElement(_,{onFocus:function(){return De(!0)},responseContent:Me,setIsEmpty:je,setResponseContent:Be,isEditorOpen:Te}):p.createElement(Q.Z,{padding:"14px"},p.createElement(h.c,{editor:ye},p.createElement(v.O,{onFocus:function(){return De(!0)},renderLeaf:xe,renderElement:Ie,placeholder:oe})))):p.createElement(L.R9,{operation:"register",susiEntry:"respond_sidebar"},p.createElement(Q.Z,{padding:"14px"},p.createElement(V.F,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),ue?p.createElement("div",{className:ve(te(Te,{justifyContent:"space-between"}))},p.createElement(x.XZ,{onChange:me,checked:pe===C.Et.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px"},"Also publish to my profile"),Ye):p.createElement("div",{className:ve(te(Te,{alignSelf:"flex-end"}))},Ye))),p.createElement(H,{isVisible:Ve,hide:Ke}))}},31078:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>T,Z:()=>w});var o=n(59713),r=n.n(o),s=n(63038),i=n.n(s),a=n(28655),l=n.n(a),u=n(71439),c=n(46829),p=n(67294),d=n(32262),m=n(7530),f=n(64504),v=n(62630),g=n(27572),h=n(28309);function b(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function E(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return E=function(){return e},e}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return y=function(){return e},e}function x(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return x=function(){return e},e}var I=function(){return{fontStyle:"italic",textAlign:"center"}},O=(0,u.Ps)(x()),S=(0,u.Ps)(y()),T=function(e){var t,n=e.parentPostId,o=e.responsesLocked,r=e.hidePopoverMenu,s=(0,h.Iq)(),a=(0,v.Av)(),l=(0,g.pK)(),u=p.useState(!1),b=i()(u,2),E=b[0],R=b[1],P=(0,c.useMutation)(O,{variables:{postId:n},update:function(e){a.event("responses.locked",{postId:n,source:l}),D(e,n,!0,r)}}),y=i()(P,1)[0],x=(0,c.useMutation)(S,{variables:{postId:n},update:function(e){D(e,n,!1,r)}}),T=i()(x,1)[0];return t=!0===o?p.createElement(m.rU,{onClick:T},"Open discussion"):p.createElement(m.rU,{onClick:function(){return R(!0)}},"Close discussion"),p.createElement(p.Fragment,null,p.createElement(d.Sl,null,t),E&&p.createElement(m.Vq,{isVisible:E,hide:function(){return R(!1)},withCloseButton:!1,noPortal:!0,padding:50},p.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},p.createElement(f.X6,{scale:"M"},"Close Discussion"),p.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},p.createElement(f.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),p.createElement(m.xu,{display:"flex",marginBottom:"20px"},p.createElement(m.rU,{onClick:function(){return R(!1)}},p.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),p.createElement(m.xu,{marginLeft:"25px"},p.createElement(m.zx,{buttonStyle:"ERROR",onClick:y,"data-test-id":"close-discussion-button"},"Close discussion"))),p.createElement("div",{className:s(I)},p.createElement(f.F,{scale:"M"},"You can reopen the discussion at any time.")))))},D=function(e,t,n,o){var r=e.readQuery({query:C,variables:{postId:t}});r&&(e.writeQuery({query:C,data:Object.assign({},r,{post:P(P({},r.post),{},{responsesLocked:n})}),variables:{postId:t}}),o())},w=(0,u.Ps)(E()),C=(0,u.Ps)(b(),w)},26912:(e,t,n)=>{"use strict";var o;n.d(t,{Q:()=>o}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(o||(o={}))},80471:(e,t,n)=>{"use strict";n.d(t,{y:()=>He,k:()=>Ve});var o=n(319),r=n.n(o),s=n(63038),i=n.n(s),a=n(38125),l=n.n(a),u=n(67294),c=n(86156),p=n(59713),d=n.n(p),m=n(46829),f=n(2074),v=n(23450),g=n.n(v),h=n(26600),b=n(78067),E=n(51176),R=n(14267),P=n(72558),y=n(19537),x=n(68356),I=n.n(x),O=n(79853),S=n(90320);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={delay:1e3,timeout:2e4,loading:function(e){return e.error?u.createElement(O.Z,{error:e.error}):e.timedOut?u.createElement(O.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?u.createElement(S.Z,null):null}},C=I()(D(D({},w),{},{loader:function(){return n.e(6635).then(n.bind(n,91229))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[91229]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return u.createElement(n,t)}})),k=function(e){var t=e.parentPostId,n=e.responseId,o=e.type,r=void 0===o?y.H.create:o,s=e.initialValue;return u.createElement(C,{parentPostId:t,responseId:n,type:r,initialValue:s})},j=n(27572),_=function(e){var t,n=e.responsePost,o=e.index,s=e.parentPost,a=e.omitBottomBorder,l=u.useState(!1),c=i()(l,2),p=c[0],d=c[1],m=u.useState(null),f=i()(m,2),v=f[0],g=f[1],h=u.useContext(R.D),b=h.editingResponsesAtIndices,x=h.setEditingResponsesAtIndices;return u.useEffect((function(){if(p&&!b.includes(o)&&x([].concat(r()(b),[o])),!p&&b.includes(o)){var e=b.filter((function(e){return e!==o}));x(e)}}),[p,b,x]),n?p?u.createElement(E.Q.Provider,{value:{isEditing:p,setIsEditing:d,latestRev:null==n?void 0:n.latestRev,createdAt:null==n?void 0:n.createdAt,setEditingQuote:g,editingQuote:v}},u.createElement(j.cW,{source:{index:o},key:n.id,extendSource:!0},u.createElement(k,{type:y.H.edit,parentPostId:s.id,responseId:n.id,initialValue:null==n||null===(t=n.content)||void 0===t?void 0:t.bodyModel}))):u.createElement(E.Q.Provider,{value:{isEditing:p,setIsEditing:d,setEditingQuote:g,editingQuote:v}},u.createElement(j.cW,{source:{index:o},key:n.id,extendSource:!0},u.createElement(P.OT,{parentPost:s,simpleResponse:n,omitBottomBorder:a}))):null},A=n(7530),M=n(28309),B={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},N=function(){var e=(0,M.om)({shimmerKeyframesName:B}).shimmerKeyframesName,t=(0,M.Iq)();return u.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},u.createElement(A.xu,{display:"flex",flexDirection:"row"},u.createElement(A.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{marginLeft:"8px",marginTop:"4px"},u.createElement(A.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),u.createElement(A.xu,{marginTop:"12px"},u.createElement(A.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))},L=n(64504),U=n(15699),Q=n(14391),F=n(81162),H=n(14349),V=n(27390),$=n(27952),K=n(24745),q=n(51151),Z=n(26912);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var W,G=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},Y=function(e){var t,n,o=e.storyResponse,r=e.parentPost,s=e.omitBottomBorder,i=(0,M.Iq)(),a=(0,M.Fg)(),l=o.creator,c=o.previewContent,p=o.mediumUrl,d=o.clapCount,m=o.responsesCount,f=null==c||null===(t=c.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(l&&c&&c.bodyModel&&p&&f))return null;var v=function(e){var t,n=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(r.text&&(n.push(r),n.length>=2))break}}catch(e){o.e(e)}finally{o.f()}return{title:n[0],subtitle:n[1]}}(f);if(!v.title&&!v.subtitle)return null;var g,h=null!==(null===(n=o.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),b=m||0;return u.createElement(U.Z,{post:o,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},u.createElement(A.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:s?void 0:"BASE_LIGHTER"},u.createElement(K.E,{response:o,responseType:Z.Q.STORY,parentPost:r}),u.createElement(q.J,{inResponseToMediaResource:o.inResponseToMediaResource}),u.createElement(A.P3,{href:(0,$.jVf)(o)},u.createElement("div",{className:i({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:h?"12px":"16px",backgroundColor:a.backgroundColor})},u.createElement("div",{className:i(G)},u.createElement(L.F,{scale:"S",color:"LIGHTER",tag:"div"},u.createElement(A.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:d>0||b>0?"20px":"0"},d>0?u.createElement(A.xu,{display:"flex",alignItems:"center"},u.createElement(A.xu,{tag:F.Z,marginRight:"2px"}),u.createElement("div",null,(0,V.pY)(d))):null,b>0?u.createElement(A.xu,{display:"flex",alignItems:"center"},u.createElement(A.xu,{tag:H.Z,marginLeft:d?"8px":"0",marginRight:"2px"}),u.createElement("div",null,(0,V.pY)(b))):null))),u.createElement(L.F,{scale:"M",clamp:2,color:"DARKER"},v.title&&u.createElement(A.xu,null,v.title.text),v.subtitle&&u.createElement("div",{className:i((g=v.title.type,function(e){return{color:g===Q.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},v.subtitle.text))))))},J=n(54260),X=n(9471),ee=n(22091),te=n(62630);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(W||(W={}));var re=function(e,t){return{marginBottom:t?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(e.baseColor.border.lighter)}},se=function(e,t){var n,o,s,i,a,l,u=null==t||null===(n=t.post)||void 0===n?void 0:n.threadedPostResponses,c=null==t?void 0:t.post,p=null==t||null===(o=t.post)||void 0===o?void 0:o.threadedPostResponses;if(!(c&&u&&u.posts&&p))return e;var d=(null==e||null===(s=e.post)||void 0===s||null===(i=s.threadedPostResponses)||void 0===i?void 0:i.posts)||[],m=(null==t||null===(a=t.post)||void 0===a||null===(l=a.threadedPostResponses)||void 0===l?void 0:l.posts)||[];return{post:oe(oe({},c),{},{threadedPostResponses:oe(oe({},p),{},{posts:[].concat(r()(d),r()(m))})})}},ie=function(e){var t,n,o,r=e.replies,s=e.parentPost,i=e.inResponseToPostId,a=e.threadDepthFromRootPost,l=e.threadDepthOnPage,c=void 0===l?1:l,p=e.displayBottomBorder,d=void 0!==p&&p,m=e.isShowAutoExpandedResponse,f=void 0!==m&&m,v=e.autoExpandedResponseIds,g=void 0===v?[]:v,h=(0,te.Av)(),E=(0,j.pK)(),P=u.useContext(R.D),y=P.rootPostId,x=P.isResponsesSidebarVisible;return null!=r&&r.posts&&0!==(null==r||null===(t=r.posts)||void 0===t?void 0:t.length)?u.createElement(ee.xu,null,f?null==r||null===(n=r.posts)||void 0===n?void 0:n.map((function(e,t,n){if(!e)return null;var o=function(e,t,n){return n?e!==n[n.length-1]:e!==t[t.length-1].id}(e.id,n,g)||d;return function(e,t){return t.some((function(t){return t===e}))}(e.id,g)?(x&&h.event("response.autoExpanded",{postId:e.id,parentPostId:i,rootPostId:y,threadDepth:a,context:b.r.INLINE_POST_RESPONSE,source:E}),u.createElement(ae,{reply:e,parentPost:s,bottomBorder:o,index:t,inResponseToPostId:i,key:e.id,threadDepthFromRootPost:a,threadDepthOnPage:c})):null})):null==r||null===(o=r.posts)||void 0===o?void 0:o.map((function(e,t,n){if(!e)return null;var o=t!==n.length-1||d;return u.createElement(ae,{reply:e,parentPost:s,bottomBorder:o,index:t,inResponseToPostId:i,key:e.id,threadDepthFromRootPost:a,threadDepthOnPage:c})}))):null},ae=function(e){var t,n,o,s,a,l,p=e.reply,d=e.parentPost,v=e.bottomBorder,E=e.index,P=e.inResponseToPostId,y=e.threadDepthOnPage,x=void 0===y?1:y,I=e.threadDepthFromRootPost,O=(0,M.Iq)(),S=(0,M.Fg)(),T=(0,j.pK)(),D=(0,te.Av)(),w=null!==(t=p.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?r()(p.threadedPostResponses.autoExpandedPostIds):[],C=u.useState(Boolean(w.length)),k=i()(C,2),A=k[0],B=k[1],U=u.useContext(R.D),F=U.responsesLocked,H=U.isLockedResponse,V=U.inResponseToQuote,$=U.setInResponseToQuote,K=U.setIsSavingResponse,q=U.sidebarRef,Z=U.responseDistribution,z=U.setResponseDistribution,G=U.rootPostId,ne=U.isResponsesSidebarVisible,oe=u.useContext(c.f).addContinueThisThreadSidebar,ae=u.useState([]),le=i()(ae,2),ue=le[0],ce=le[1],pe=u.useRef(null),de=null===(n=p.creator)||void 0===n?void 0:n.name;de&&(l="Replying to ".concat(de));var me=(0,m.useLazyQuery)(f.A,{variables:{postId:p.id,postResponsesPaging:{limit:10}},ssr:!1}),fe=i()(me,2),ve=fe[0],ge=fe[1],he=ge.called,be=ge.data,Ee=ge.loading,Re=ge.fetchMore;u.useEffect((function(){var e;null!=pe&&null!==(e=pe.current)&&void 0!==e&&e.getBoundingClientRect&&pe.current.getBoundingClientRect().bottom>window.innerHeight&&pe.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var Pe=null==be||null===(o=be.post)||void 0===o?void 0:o.threadedPostResponses;A&&!he&&ve();var ye,xe=(null==Pe?void 0:Pe.posts)||[],Ie=(null===(s=p.postResponses)||void 0===s?void 0:s.count)||0,Oe=function(e,t,n,o){var r=t.length,s=n.length;return r&&e?o-r:s?o-s:0}(A,w,xe,Ie),Se=Oe>0,Te=null==Pe||null===(a=Pe.pagingInfo)||void 0===a?void 0:a.next;return Te&&(ye=function(){Re&&Re({variables:{postId:p.id,postResponsesPaging:{limit:Te.limit,to:Te.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return se(e,n)}})}),u.createElement(ee.Bn,{initialVisibility:A},(function(e){var t=e.isVisible,n=e.toggle,o=e.show;return u.createElement(ee.Bn,null,(function(e){var r,s=e.isVisible,i=e.hide,a=e.toggle;return u.createElement(ee.xu,{borderBottom:v?"BASE_LIGHTER":"NONE",marginLeft:"24px",marginRight:x>1?"0":"24px"},u.createElement(J.H.Provider,{value:{inResponseToPostId:P,isThreadedResponsesVisible:t,toggleThreadedResponses:function(){he||ve(),B(!1),n()},showThreadedResponses:function(){he||(ve(),D.event("response.expanded",{postId:p.id,parentPostId:P,rootPostId:G,threadDepth:I,context:b.r.INLINE_POST_RESPONSE,source:T})),B(!1),o()},threadDepthFromRootPost:I,threadDepthOnPage:x,hideCreateReply:i,toggleCreateReply:a,loadThreadedResponses:ve,isThreadedResponsesQueryCalled:he,isThreadedResponsesQueryLoading:Ee,showContinueThisThreadSidebar:function(){oe(p)}}},u.createElement("div",{ref:0===E?pe:void 0},function(e){switch(e.inResponseToType){case W.STORY:case W.LEGACY:return e.content.bodyModel.paragraphs.every((function(e){return e.type===Q.NJ.P&&0===e.markups.length}));default:return!0}}(p)?u.createElement(_,{responsePost:p,index:E,parentPost:d,omitBottomBorder:!0}):u.createElement(j.cW,{source:{index:E},key:p.id,extendSource:!0},u.createElement(Y,{storyResponse:p,parentPost:d,omitBottomBorder:!0}))),s&&u.createElement("div",{className:O(re(S,t))},u.createElement(j.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(h.z,null,u.createElement(X.Z,{parentPostId:p.id,hideReplyEditing:i,placeholder:l,showEditorHeader:!1}))))),t&&u.createElement("div",{className:O(re(S,Se))},Ee&&u.createElement(ee.xu,{marginLeft:"24px"},u.createElement(N,null)),(null==Pe?void 0:Pe.posts)&&(null==Pe||null===(r=Pe.posts)||void 0===r?void 0:r.length)>0&&u.createElement(R.D.Provider,{value:{setIsSavingResponse:K,responsesLocked:F,isLockedResponse:H,editingResponsesAtIndices:ue,setEditingResponsesAtIndices:ce,inResponseToQuote:V,setInResponseToQuote:$,sidebarRef:q,responseDistribution:Z,setResponseDistribution:z,rootPostId:G,isResponsesSidebarVisible:ne}},u.createElement(ie,{replies:Pe,parentPost:d,inResponseToPostId:p.id,threadDepthOnPage:x+1,threadDepthFromRootPost:I+1,isShowAutoExpandedResponse:A,autoExpandedResponseIds:w}))),Se&&(t||A)&&u.createElement(ee.xu,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},u.createElement(L.F,{color:"ACCENT",scale:"M"},u.createElement(ee.rU,{linkStyle:"OBVIOUS",onClick:function(){A?(B(!1),o()):ye()}},function(e,t){return e?"Show ".concat(t," more ").concat(g()("reply",t)):"Load more replies (".concat(t,")")}(A,Oe)))))}))}))},le=n(33914);function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var ce=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 5.04c.26-.21.64-.22.91-.01.97.72 1.77 1.21 2.6 1.54.83.32 1.72.48 2.89.5.41.01.74.35.74.76-.02 3.62-.43 6.26-1.45 8.21-1.03 1.98-2.66 3.21-4.97 4.08a.75.75 0 0 1-.53 0c-2.25-.87-3.86-2.1-4.9-4.07-1.02-1.95-1.46-4.59-1.48-8.22 0-.41.33-.75.75-.76 1.19-.02 2.1-.18 2.92-.5.82-.32 1.6-.81 2.52-1.53zm.46.9c-.9.69-1.71 1.21-2.62 1.56a8.9 8.9 0 0 1-3.02.57c.03 3.45.46 5.82 1.36 7.51.88 1.69 2.25 2.77 4.28 3.57 2.1-.8 3.47-1.89 4.34-3.57.89-1.7 1.3-4.07 1.34-7.51a8.8 8.8 0 0 1-3-.57 11.8 11.8 0 0 1-2.68-1.56zm0 9.15a2.67 2.67 0 1 0 0-5.34 2.67 2.67 0 0 0 0 5.34zm0 1a3.67 3.67 0 1 0 0-7.34 3.67 3.67 0 0 0 0 7.34zm-1.82-3.77l.53-.53.91.92 1.63-1.63.52.53-2.15 2.15-1.44-1.44z"});const pe=function(e){return u.createElement("svg",ue({width:25,height:25,viewBox:"0 0 25 25"},e),ce)};var de=function(){var e=(0,M.Iq)();return u.createElement(le._,{tooltipText:"View community guidelines"},u.createElement(A.rU,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},u.createElement(pe,null)))},me=n(16528),fe=n(6688),ve=n(93394),ge=n(32262),he=n(67297),be=n(31078),Ee={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},Re=function(e){var t=e.parentPostId,n=e.responsesLocked,o=e.isPopoverMenuVisible,r=e.hidePopoverMenu,s=(0,fe.I)(),i=(0,he.v)((function(e){return e.config.authDomain})),a=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||r()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),u.createElement("div",{className:s(Ee),ref:a},u.createElement(ge.mX,null,u.createElement(ge.Sl,null,u.createElement(A.rU,{href:(0,$.t$b)(i,t)},"Manage responses")),u.createElement(be.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:r})))},Pe=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},ye=function(e){var t,n,o=e.parentPost,r=e.responsesLocked,s=(0,fe.I)(),a=(0,me.Hk)().value,l="managementPopoverMenu",c=u.useState(!1),p=i()(c,2),d=p[0],m=p[1],f=(null==a?void 0:a.id)===(null===(t=o.creator)||void 0===t?void 0:t.id),v=null==o||null===(n=o.collection)||void 0===n?void 0:n.viewerIsEditor;return f||v?u.createElement(A.xu,null,u.createElement(A.rU,{ariaControls:l,ariaExpanded:d?"true":"false",onClick:function(e){e.nativeEvent.stopPropagation(),m(!d)},inline:!0,className:s(Pe)},u.createElement(ve.Z,null)),d&&u.createElement("div",{id:l,className:s({position:"relative"})},u.createElement(j.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(Re,{parentPostId:o.id,responsesLocked:r,isPopoverMenuVisible:d,hidePopoverMenu:function(){return m(!1)}})))):null},xe=n(3149),Ie=n(31235);function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Se=u.createElement("path",{d:"M13.4 16.96l-6.48-6.48L13.4 4l.8.71-5.77 5.77 5.77 5.77z",fillRule:"evenodd"});const Te=function(e){return u.createElement("svg",Oe({width:21,height:21},e),Se)};var De={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},we=function(e){var t,n,o,r=e.responses,s=e.parentPost,a=e.responsesLocked,l=e.isLockedResponse,c=e.isLoadingInitialContent,p=e.isFetchingNextSetOfResponses,d=e.isResponsesSidebarVisible,m=e.closeSidebar,f=e.inResponseToQuote,v=e.setInResponseToQuote,g=e.sidebarRef,h=e.responseDistribution,b=e.setResponseDistribution,E=e.rootPostId,P=e.postDepth,y=e.isContinueThisThread,x=e.showPreviousSidebar,I=(0,M.Iq)(),O=(0,Ie.xg)(),S=u.useState(!1),T=i()(S,2),D=T[0],w=T[1],C=u.useState([]),j=i()(C,2),_=j[0],B=j[1],U=s.id,Q=(null===(t=s.postResponses)||void 0===t?void 0:t.count)||0,F=y?"Thread":"Responses"+(Q>0?" (".concat(Q,")"):""),H=r,V=null==r||null===(n=r.pagingInfo)||void 0===n?void 0:n.next,$=(null==r?void 0:r.posts)&&Q&&r.posts.length<Q,K=Boolean(p&&V&&$);return u.createElement(R.D.Provider,{value:{setIsSavingResponse:w,responsesLocked:a,isLockedResponse:l,editingResponsesAtIndices:_,setEditingResponsesAtIndices:B,inResponseToQuote:f,setInResponseToQuote:v,sidebarRef:g,responseDistribution:h,setResponseDistribution:b,rootPostId:E,isResponsesSidebarVisible:d}},d&&D&&u.createElement(A.TF,{horizontalOverride:{left:"calc(100vw - ".concat(Me,")")}}),u.createElement(A.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},u.createElement(A.xu,{display:"flex",flexDirection:"row"},y&&u.createElement(A.xu,{paddingRight:"18px"},u.createElement(L.X6,{scale:"S"},u.createElement(A.rU,{onClick:x,"data-testid":"back-button","aria-label":"back"},u.createElement(Te,{height:"26px",width:"26px"})))),u.createElement(L.X6,{scale:"S"},F)),u.createElement(A.xu,{display:"flex",flexDirection:"row"},u.createElement(de,null),u.createElement(ye,{parentPost:s,responsesLocked:a}),u.createElement(A.xu,{position:"relative",right:"-7px"},u.createElement(xe.Z,{onClick:m,size:"REGULAR",isPositionAbsolute:!1})))),c?u.createElement(A.xu,{padding:"0 24px"},u.createElement(N,null)):u.createElement(u.Fragment,null,y||O&&!d?null:u.createElement(k,{parentPostId:U}),r&&0!==(null==H||null===(o=H.posts)||void 0===o?void 0:o.length)?u.createElement(A.xu,null,u.createElement(ie,{replies:r,inResponseToPostId:s.id,parentPost:s,displayBottomBorder:K,threadDepthFromRootPost:P+1}),K&&u.createElement(A.xu,{margin:"0 24px"},u.createElement(N,null))):u.createElement("div",{className:I(De)},u.createElement(L.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),u.createElement(L.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},Ce=n(324),ke=n(80637);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(e){var t={top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,pointerEvents:"none"};return e&&(t.transition="opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"),t},Me="414px",Be=function(e,t){return function(n){var o=d()({width:Me,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,ke.sm)(n),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"});return e||(o.visibility="hidden"),t||(o.transition="transform 0s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0s cubic-bezier(0.23, 1, 0.32, 1) 0s"),o}},Ne=function(e,t){return function(n){if(e){var o=n.breakpoints.md-.02;return t<=o?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},Le=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},Ue=function(e){var t,n,o,r,s,a,l,c,p,d,v=e.isResponsesSidebarVisible,g=e.inResponseToQuote,h=e.setInResponseToQuote,b=e.parentPost,E=e.continueThisThreadPost,R=e.continueThisThreadPostDepth,P=e.showPreviousSidebar,y=e.cleanupSidebar,x=e.initialSidebarRender,I=(0,M.Iq)(),O=(0,Ie.xg)(),S=u.useRef(null),T=(0,m.useLazyQuery)(f.A,{variables:{postId:b.id,postResponsesPaging:{limit:10}},ssr:!1}),D=i()(T,2),w=D[0],C=D[1],k=C.called,_=C.loading,B=C.data,N=C.fetchMore;k||E||O&&!v||w();var L,U,F,H=null==B||null===(t=B.post)||void 0===t?void 0:t.responsesLocked,V=null==B||null===(n=B.post)||void 0===n?void 0:n.isLockedResponse,$=null==B||null===(o=B.post)||void 0===o?void 0:o.threadedPostResponses;E&&($={posts:[_e(_e({},E),{},{threadedPostResponses:{posts:(null===(L=E.threadedPostResponses)||void 0===L?void 0:L.posts)||[],autoExpandedPostIds:null!==(U=E.threadedPostResponses)&&void 0!==U&&U.posts?null===(F=E.threadedPostResponses)||void 0===F?void 0:F.posts.map((function(e){return e.id})):[],pagingInfo:null,__typename:"ThreadedPostResponseConnection"}})],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"}),!v&&x&&($={posts:[],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"});var K,q=(null==B||null===(r=B.post)||void 0===r||null===(s=r.responseRootPost)||void 0===s||null===(a=s.post)||void 0===a?void 0:a.id)||"",Z=R||(null==B||null===(l=B.post)||void 0===l||null===(c=l.responseRootPost)||void 0===c?void 0:c.responseDepth)||0,z=u.useState(0),W=i()(z,2),G=W[0],Y=W[1],J=u.useState(!1),X=i()(J,2),ee=X[0],te=X[1],ne=u.useState(Q.Et.NOT_DISTRIBUTED),oe=i()(ne,2),re=oe[0],ie=oe[1];u.useEffect((function(){G||Y(window.innerWidth)}),[]);var ae=null===(p=$)||void 0===p||null===(d=p.pagingInfo)||void 0===d?void 0:d.next;ae&&!E&&(K=function(){N&&N({variables:{postId:b.id,postResponsesPaging:{limit:ae.limit,to:ae.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return te(!1),se(e,n)}})});var le=function(){ie(Q.Et.NOT_DISTRIBUTED),y()};return u.createElement(Ce.N8,null,u.createElement(j.cW,{source:{name:"responses",postId:b.id},extendSource:!0},u.createElement(A.xu,{print:{display:"none"}},u.createElement("div",{className:I([Ae(x),Le(v)]),onClick:le,onKeyUp:function(e){13===e.keyCode&&le()},"aria-hidden":!v,role:"presentation"}),u.createElement("div",{className:I([Be(v,x),Ne(v,G)]),"aria-hidden":!v,onScroll:function(e){return Qe(e,ae,ee,te,K)},ref:S},u.createElement(we,{responses:$,parentPost:b,responsesLocked:H,isLockedResponse:V,isLoadingInitialContent:_,isFetchingNextSetOfResponses:ee,isResponsesSidebarVisible:v,closeSidebar:le,showPreviousSidebar:P,inResponseToQuote:g,setInResponseToQuote:h,sidebarRef:S,responseDistribution:re,setResponseDistribution:ie,rootPostId:q,postDepth:Z,isContinueThisThread:!!E})))))},Qe=function(e,t,n,o,r){e.preventDefault();var s=e.currentTarget;s.scrollHeight-s.scrollTop-s.clientHeight<1.5*s.clientHeight&&t&&!n&&(o(!0),r())},Fe=n(8403),He=3,Ve=function(e){var t=e.children,n=e.post,o=!!(0,Fe.Wd)("responsesOpen"),s=u.useState(!1),a=i()(s,2),p=a[0],d=a[1],m=u.useRef(!0),f=u.useState(void 0),v=i()(f,2),g=v[0],h=v[1],b=u.useState(!1),E=i()(b,2),R=E[0],P=E[1],y=u.useState([]),x=i()(y,2),I=x[0],O=x[1],S=function(){O(l()(I))},T=function(){d(!1),O([]),m.current=!0};return u.useEffect((function(){P(!0),d(o)}),[o]),u.createElement(c.f.Provider,{value:{openSidebarToRespondToHighlight:function(e){h(e),d(!0)},addContinueThisThreadSidebar:function(e){m.current=!1,O([].concat(r()(I),[e]))}}},R&&u.createElement(Ue,{isResponsesSidebarVisible:p&&0===I.length,parentPost:n,inResponseToQuote:g,setInResponseToQuote:h,showPreviousSidebar:S,cleanupSidebar:T,initialSidebarRender:m.current}),R&&I.map((function(e,t,o){var r=(He-1)*(t+1);return u.createElement(Ue,{key:n.id,isResponsesSidebarVisible:p&&t===o.length-1,parentPost:n,inResponseToQuote:g,setInResponseToQuote:h,continueThisThreadPost:e,continueThisThreadPostDepth:r,showPreviousSidebar:S,cleanupSidebar:T,initialSidebarRender:m.current})})),t({show:function(){return d(!0)}}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8953.dff3fa8c.chunk.js.map