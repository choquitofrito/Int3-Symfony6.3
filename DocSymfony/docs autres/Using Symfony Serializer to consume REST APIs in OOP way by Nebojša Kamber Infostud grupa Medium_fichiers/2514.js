(self.webpackChunklite=self.webpackChunklite||[]).push([[2514],{26600:(e,t,r)=>{"use strict";r.d(t,{z:()=>u,c:()=>l});var n=r(63038),a=r.n(n),i=r(67294),o=[{children:[{text:""}]}],c=i.createContext({}),u=function(e){var t=e.children,r=e.initialValue,n=i.useState(null),u=a()(n,2),l=u[0],s=u[1],d=i.useState(null),f=a()(d,2),p=f[0],h=f[1],m=i.useState(r||o),v=a()(m,2),g=v[0],y=v[1];return i.createElement(c.Provider,{value:{mode:p,setMode:h,backgroundSelection:l,setBackgroundSelection:s,value:g,setValue:y,clearValue:function(){y(o)}}},t)},l=function(){return i.useContext(c)}},25772:(e,t,r)=>{"use strict";r.d(t,{O:()=>u});var n=r(18156),a=r(67294),i=r(84792),o=r(10143),c=r(54803),u=function(e){var t=e.renderElement,r=e.renderLeaf,u=e.onFocus,l=e.onKeyDown,s=void 0===l?function(){}:l,d=e.decorate,f=e.editor,p=e.placeholder,h=void 0===p?"Share your thoughts...":p,m=a.useCallback((function(e){f&&""===i.Node.string(f)&&(0,n.default)("backspace",e)&&(0,c.oe)(f),s(e)}),[f,s]);return a.createElement(o.CX,{renderElement:t,renderLeaf:r,placeholder:h,onFocus:u,onKeyDown:m,decorate:d})}},22470:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=r(67294),a=r(10143),i=r(26600),o=function(e){var t=e.children,r=e.editor,o=(0,i.c)(),c=o.setValue,u=o.value;return u&&c?n.createElement(a.mH,{editor:r,value:u,onChange:c},t):null}},54803:(e,t,r)=>{"use strict";r.d(t,{AR:()=>n,wB:()=>y,T8:()=>E,Nx:()=>w,uT:()=>x,t$:()=>N,w9:()=>O,St:()=>T,th:()=>P,Cr:()=>S,oe:()=>j,J1:()=>I});var n,a=r(59713),i=r.n(a),o=r(63038),c=r.n(o),u=r(42348),l=r.n(u),s=r(84792),d=r(14391);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.Link=0]="Link"}(n||(n={}));var h=["numbered-list","bulleted-list","bq"];function m(e){if(!e.children)return[];if(e.children.every((function(e){return function(e){return s.Text.isText(e)||"link"===e.type}(e)}))){var t=s.Node.string(e),r=!(null!=e&&e.name),n=r?b():e.name,a=function(e){switch(e){case"oli":return 10;case"uli":return 9;case"bq-line":return 6;case"image":return 4;case"title":return 3;default:return 1}}(e.type);if("image"===e.type)return[{type:r?1:3,paragraph:{name:n,type:a,text:t,markups:[],layout:1,metadata:{id:e.imageProps.miroId,originalWidth:e.imageProps.width,originalHeight:e.imageProps.height}},verifySameName:!r}];if(!t.length&&!e.name)return[];if(!t.length&&e.name)return[{type:2,paragraph:{name:e.name}}];var i=e.children.reduce((function(e,t){var r=c()(e,2),n=r[0],a=r[1],i=s.Node.string(t).length;return t.italic&&a.push({type:2,start:n,end:n+i}),t.bold&&a.push({type:1,start:n,end:n+i}),"link"===t.type&&a.push({type:3,start:n,end:n+i,href:t.url,title:"",rel:"",anchorType:0}),[n+i,a]}),[0,[]]);return[{type:r?1:3,paragraph:{markups:c()(i,2)[1],name:n,text:t,type:a},verifySameName:!r}]}return l()(e.children.map(m).filter((function(e){return e.length})))}function v(e,t){return e.map((function(e,r){return e.index=r+t,e}))}var g=function(e){var t=[];return e.map((function(e){return t.includes(e.name)?p(p({},e),{},{name:void 0}):(e.name&&t.push(e.name),e)}))};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},r=t.includeInitialDeltas,n=[];if(r){var a=b();n=[{type:8,index:0,section:{name:a,startIndex:0}}]}var i=e.children,o=g(i);e.children=o;var c=0;if(!o[0].name&&"title"!==o[0].type){var u=b();n.push({type:1,index:0,paragraph:{name:u,type:3,text:"",markups:[]}}),c=1}var l=m(e),s=v(l,c);return n.concat(s)}function b(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")}var E=function(e,t){e.selection&&x(e,t)},w=function(e,t){var r=t||e.selection;s.Transforms.unwrapNodes(e,{match:function(e){return"link"===e.type},at:r})},x=function(e,t){(function(e){var t=s.Editor.nodes(e,{match:function(e){return"link"===e.type}});return!!c()(t,1)[0]})(e)&&w(e);var r=e.selection,n=r&&s.Range.isCollapsed(r),a={type:"link",url:t,children:n?[{text:t}]:[]};n?s.Transforms.insertNodes(e,a):(s.Transforms.wrapNodes(e,a,{split:!0}),s.Transforms.collapse(e,{edge:"end"}))},N=function(e,t,r){var n=r||e.selection,a=s.Editor.nodes(e,{match:function(e){return!0===e[t]||e.type===t},at:n,mode:"all"});return!!c()(a,1)[0]},O=function(e,t){N(e,t)?s.Editor.removeMark(e,t):s.Editor.addMark(e,t,!0)},k=function(e){switch(e){case"bq":return"bq-line";case"numbered-list":return"oli";case"bulleted-list":default:return"uli"}},T=function(){if("undefined"!=typeof window){var e=window.getSelection(),t=e&&!e.isCollapsed&&e.getRangeAt(0);return t&&t.getBoundingClientRect()}},P=function(e,t,r){var n=r||e.selection,a=N(e,t,r),i=h.includes(t),o=s.Range.isRange(n)?s.Editor.rangeRef(e,n):s.Point.isPoint(n)?s.Editor.pointRef(e,n):s.Editor.pathRef(e,n);if(s.Transforms.unwrapNodes(e,{at:n,match:function(e){return h.includes(e.type)},split:!0}),o.current&&(s.Transforms.setNodes(e,{type:a?"paragraph":i?k(t):t},{at:o.current}),!a&&i)){var c={type:t,children:[]};s.Transforms.wrapNodes(e,c,{at:o.current})}},S=function(e,t){["bold","italic"].forEach((function(r){N(e,r,t)&&s.Transforms.unsetNodes(e,r,{at:t})})),["link","numbered-list","bulleted-list","bq"].forEach((function(r){N(e,r,t)&&s.Transforms.unwrapNodes(e,{at:t,match:function(e){return e.type===r}})}))},j=function(e){if(e){var t=function(e){if(!e||!e.children.length)return!1;var t=s.Editor.point(e,[0],{edge:"start"}),r=e.children.length;return{anchor:t,focus:s.Editor.point(e,[r-1],{edge:"end"})}}(e);t&&(s.Transforms.removeNodes(e,{at:t}),s.Transforms.insertNodes(e,{children:[{text:""}]}))}},D=function(e){return"link"===e.type},I=function(e){return e.paragraphs.map((function(e){var t=e.markups,r=e.name,n=e.text;if(e.type===d.NJ.H3)return{children:[{text:n}],name:r,type:"title"};if(null==t||!t.length)return{children:[{text:n}],name:r};var a=new Set;a.add(0),a.add(n.length),t.forEach((function(e){var t=e.start,r=e.end;a.add(t),a.add(r)}));var i=Array.from(a);return{children:i.sort((function(e,t){return e-t})).slice(1).map((function(e,r,a){var o=r?a[r-1]:i[0],c=e,u=t.filter((function(e){return e.start<=o&&c<=e.end})),l={text:n.substring(o,c)};return u.forEach((function(e){var t=e.href;switch(e.type){case d.Jh.STRONG:(D(l)?l.children[0]:l).bold=!0;break;case d.Jh.EM:(D(l)?l.children[0]:l).italic=!0;break;case d.Jh.A:l={type:"link",url:t,children:[l]}}})),l})),name:r}}))}},9735:(e,t,r)=>{"use strict";r.d(t,{w1:()=>ae,rL:()=>Y,D5:()=>G,Vz:()=>V,Fm:()=>K,lw:()=>Z,Uk:()=>te,u$:()=>Q,cv:()=>$,c:()=>X});var n=r(6479),a=r.n(n),i=r(63038),o=r.n(i),c=r(67154),u=r.n(c),l=r(68337),s=r.n(l),d=r(67294),f=r(84792),p=r(86817),h=r(10143),m=r(61889),v=r(7530),g=r(28309),y=r(14391),b=r(8667),E=function(e){var t=(0,h.vt)(),r=(0,h.UE)(),n=(0,h.ui)(),a=(0,g.Iq)(),i=e.ParagraphWrapper;switch(e.element.type){case"link":return d.createElement("span",e.attributes,d.createElement(v.rU,{linkStyle:"OBVIOUS",cursor:"text",inline:!0,href:e.element.url},e.children));case"numbered-list":return d.createElement("ol",e.attributes,e.children);case"bulleted-list":return d.createElement("ul",e.attributes,e.children);case"bq":return d.createElement("div",e.attributes,d.createElement(i,u()({},e,{editor:n}),e.children));case"image":var o=(0,b.jg)({layout:y.ms.FULL_WIDTH,originalWidth:e.element.imageProps.width,originalHeight:e.element.imageProps.height}),c=o.width,l=o.strategy,s=o.otherWidths;return d.createElement("div",u()({},e.attributes,{className:a({margin:"20px 0 10px"})}),d.createElement("div",{contentEditable:!1,className:a({boxShadow:"".concat(t&&r?"0 0 0 3px #03a87c":"none")})},d.createElement(m.Z,{maxWidth:"100%",miroId:e.element.imageProps.miroId,width:c,strategy:l,otherWidths:s})),e.children);default:return d.createElement("div",e.attributes,d.createElement(i,u()({},e,{editor:n}),e.children))}},w=r(59713),x=r.n(w);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var O=d.createElement("path",{d:"M20 12h-7V5h-1v7H5v1h7v7h1v-7h7",fillRule:"evenodd"});const k=function(e){return d.createElement("svg",N({className:"adder-25px_svg__svgIcon-use",width:25,height:25},e),O)};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var P=d.createElement("g",{fillRule:"evenodd"},d.createElement("path",{d:"M4.04 17.05v-8.2c0-1.08.84-1.84 1.94-1.84h2.45c.44-.75.81-2.01 1.17-2L15.4 5c.3 0 .76 1.32 1.18 2 0 .08 2.5 0 2.5 0 1.09 0 1.96.76 1.96 1.85v8.2c0 1.08-.87 1.94-1.97 1.94H5.97a1.9 1.9 0 0 1-1.93-1.94zM6.21 8a1.2 1.2 0 0 0-1.17 1.18v7.68c0 .63.55 1.15 1.17 1.15H18.9c.62 0 1.14-.53 1.14-1.15V9.17c0-.62-.52-1.17-1.14-1.17h-3.03c-.24-.63-.73-1.92-.87-2h-5c-.21.1-.87 2-.87 2H6.21z"}),d.createElement("path",{d:"M12.48 15.98A3.47 3.47 0 0 1 9 12.48 3.47 3.47 0 0 1 12.48 9a3.47 3.47 0 0 1 3.5 3.49 3.47 3.47 0 0 1-3.5 3.49zm0-6.08a2.62 2.62 0 0 0-2.59 2.59c0 1.4 1.19 2.59 2.6 2.59 1.4 0 2.58-1.19 2.58-2.6 0-1.4-1.18-2.58-2.59-2.58z"}));const S=function(e){return d.createElement("svg",T({className:"camera-25px_svg__svgIcon-use",width:25,height:25},e),P)};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var D=d.createElement("g",{fillRule:"evenodd"},d.createElement("path",{d:"M8.45 12H5.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5H8.45zM17.45 12H14.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5h-2.25z"}));const I=function(e){return d.createElement("svg",j({className:"section-25px_svg__svgIcon-use",width:25,height:25},e),D)};var C=r(79208);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(){var e=(0,g.Iq)(),t=(0,h.ui)(),r=d.useState(!1),n=o()(r,2),a=n[0],i=n[1],c=d.useCallback((function(){i(!a)}),[a]),u={borderRadius:"100%",border:"1px solid rgba(0,0,0,.68)",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},l=(0,C.JA)((function(e,r){var n=r.height,a=r.width;Y(t,{miroId:e.value.fileId,width:a,height:n})}),(function(){})),s=l.inputRef,f=l.fireClick,p=d.useCallback((function(){c(),f()}),[f]);return d.createElement("div",{className:e({position:"relative",top:"-3px"})},d.createElement("div",{className:e({position:"absolute",left:"-55px",display:"flex",backgroundColor:a?"white":"transparent",transition:"background-color 0.25s, padding 0.25s",zIndex:"10",padding:a?"5px 200px 5px 5px":"5px"})},d.createElement("div",{className:e(R(R({},u),{},{transform:a?"rotate(45deg)":"",transition:"transform 0.25s"})),onClick:c},d.createElement(k,null)),d.createElement("div",{className:e(R(R({},u),{},{marginLeft:a?"32px":"0px",transform:a?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"})),onClick:p},d.createElement(S,null)),d.createElement("div",{className:e(R(R({},u),{},{marginLeft:a?"10px":"0px",transform:a?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"}))},d.createElement(I,null))),d.createElement("input",{type:"file",ref:s,className:e({display:"none"})}))},U=r(54803),q=r(95064),z=r(19692),B=r(69703),M=r(65441);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=s()(),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d.useMemo((function(){var t=W((0,p.VC)((0,h.BU)((0,f.createEditor)())));return e.reduce((function(e,t){return t(e)}),t)}),[]),n=d.useCallback((function(e){return d.createElement(_,e)}),[]),a=t.ParagraphWrapper||ne,i=function(e){return d.createElement(E,u()({},e,{ParagraphWrapper:a}))};return{editor:r,renderLeaf:n,renderElement:i}},_=function(e){var t=e.attributes,r=e.children,n=e.leaf;return n.bold&&(r=d.createElement("strong",null,r)),n.italic&&(r=d.createElement("em",null,r)),d.createElement("span",t,r)},F=function(e){var t=J.match(e)||[],r=o()(t,1)[0];return!!r&&r.raw===e},G=function(e){var t=J.match(e)||[],r=o()(t,1)[0];return r&&r.raw===e?r.url:null},W=function(e){var t=e.isInline,r=e.isVoid;return e.isVoid=function(e){return r(e)},e.isInline=function(e){return"link"===e.type||t(e)},e},X=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var n=o()(r,2),a=n[0],i=n[1];"title"===a.type&&0!==i[0]&&(0,U.th)(e,"title",i),"title"===a.type&&a.children.forEach((function(t,r){var n=i.concat(r);(0,U.Cr)(e,n)})),t([a,i])},e},Z=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var n=o()(r,2),a=n[0],i=n[1],c=!a.type||"paragraph"===a.type,u=a.children&&1===a.children.length&&f.Text.isText(a.children[0])&&("- "===f.Node.string(a)||"* "===f.Node.string(a));c&&u&&f.Editor.withoutNormalizing(e,(function(){f.Transforms.insertFragment(e,[{text:""}],{at:i}),f.Transforms.delete(e,{at:i.concat(1)}),(0,U.th)(e,"bulleted-list",i)}));var l=a.children&&1===a.children.length&&f.Text.isText(a.children[0])&&"1. "===f.Node.string(a);c&&l&&f.Editor.withoutNormalizing(e,(function(){f.Transforms.insertFragment(e,[{text:""}],{at:i}),f.Transforms.delete(e,{at:i.concat(1)}),(0,U.th)(e,"numbered-list",i)})),t([a,i])},e},$=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var n=o()(r,2),a=n[0],i=n[1];if("bulleted-list"===a.type||"numbered-list"===a.type||"bq"===a.type){var c=a.children.length;if(c>1&&a.children.slice(-2,-1).every((function(e){return""===f.Node.string(e)}))){var u=c-2;f.Transforms.removeNodes(e,{at:i.concat(u)}),f.Transforms.setNodes(e,{type:"paragraph"},{at:i.concat(u)}),f.Transforms.liftNodes(e,{at:i.concat(u)})}}t([a,i])},e},K=function(e){var t=e.insertData,r=e.insertText;return e.insertText=function(t){t&&F(t)?(0,U.uT)(e,t):r(t)},e.insertData=function(r){var n=r.getData("text/plain");n&&F(n)?(0,U.uT)(e,n):t(r)},e},Q=function(e){var t=e.insertData,r=e.insertBreak,n=e.isVoid;return e.isVoid=function(e){return"image"===e.type||n(e)},e.insertBreak=function(){var t=f.Editor.parent(e,e.selection),n=o()(t,2),a=n[0],i=n[1];if(f.Editor.after(e,e.selection)||"image"!==a.type)r();else{var c=f.Path.next(i);f.Transforms.insertNodes(e,{children:[{text:""}]},{at:c,voids:!0}),f.Transforms.select(e,c)}},e.insertData=function(e){var r=e.getData("text/plain"),n=e.files;if(n&&n.length>0){var a,i=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}(n);try{for(i.s();!(a=i.n()).done;){var c=a.value,u=new FileReader,l=c.type.split("/");"image"===o()(l,1)[0]&&(u.addEventListener("load",(function(){})),u.readAsBinaryString(c))}}catch(e){i.e(e)}finally{i.f()}}else(function(e){if(!e)return!1;if(!F(e))return!1;var t=new URL(e).pathname.split(".").pop();return!!t&&["jpg","JPG","png","PNG","jpeg","JPEG"].includes(t)})(r)||t(e)},e},Y=function(e,t){var r={type:"image",imageProps:t,children:[{text:""}]};f.Transforms.insertNodes(e,r)};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.selection,n=r.anchor,a=f.Editor.before(e,n,{distance:t});if(!a)return"";var i={anchor:a,focus:r.anchor};return f.Editor.string(e,i)}var te=function(e){var t=e.insertText;return e.insertText=function(r){var n=e.selection;if(n&&f.Range.isCollapsed(n)){var a=ee(e,1);if("-"===r&&"-"===a)return f.Editor.deleteBackward(e),t("—");if(">"===r&&"-"===a)return f.Editor.deleteBackward(e),t("→");if("-"===r&&"<"===a)return f.Editor.deleteBackward(e),t("←");if('"'===r&&a.match(/\S/))return t("”");if("'"===r&&a.match(/\S/))return t("’");if("'"===r)return t("‘");if('"'===r&&!a.match(/\S/))return t("“");var i=ee(e,2);if("."===r&&".."===i)return f.Editor.deleteBackward(e),f.Editor.deleteBackward(e),t("…")}t(r)},e},re={title:M.qq.Title,oli:M.qq.OLI,uli:M.qq.ULI,bq:M.qq.BQ},ne=function(e){return d.createElement("p",null,e.children)},ae=function(e){var t=e.editor,r=a()(e,["editor"]),n=d.useRef(null),i=f.Node.first(t,[0])[0]===r.element.children[0],o=re[r.element.type]||y.NJ.P,c=function(e,t){switch(t){case"title":return 10;case"oli":case"uli":case"bq-line":return e?B.HM:B.Mk;default:return e?B.HM:B.Zf}}(i,r.element.type),u=(0,g.Iq)(),l=(0,h.vt)()&&0===f.Node.string(r.element).length;if("bq"===r.element.type){var s=u((0,q.l)({paragraphStyle:y.NJ.BQ,topSpacing:0,paragraphLayout:y.ms.FULL_WIDTH,richTextStyle:"CARD",isEmbedded:!1}));return d.createElement("blockquote",{className:s},r.children)}return d.createElement("div",null,l&&d.createElement(A,null),d.createElement(z.zZ,{hasDropCap:!1,name:"",paragraphRef:n,paragraphStyle:o,richTextStyle:"CARD",spaceTop:c},r.children))}},79208:(e,t,r)=>{"use strict";r.d(t,{Dm:()=>n,JA:()=>E});var n,a=r(63038),i=r.n(a),o=r(87757),c=r.n(o),u=r(48926),l=r.n(u),s=r(94301),d=r.n(s),f=r(67294),p=r(61250);!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(n||(n={}));var h=new Set(["jpg","jpeg","png","gif"]),m=function(e){return new Promise((function(t){return setTimeout(t,e)}))},v=function(){var e=l()(c().mark((function e(t,r){var n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(t,{credentials:"same-origin",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","x-xsrf-token":"1","X-Obvious-CID":"web"},body:JSON.stringify({url:r})});case 2:return n=e.sent,e.next=5,n.text();case 5:return a=e.sent,e.abrupt("return",JSON.parse(a.replace("])}while(1);</x>","")));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=l()(c().mark((function e(t,r){var n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("uploadedFile",r),e.next=4,d()(t,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:n});case 4:return a=e.sent,e.next=7,a.text();case 7:return i=e.sent,e.abrupt("return",JSON.parse(i.replace("])}while(1);</x>","")));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y="CreateUpload",b=new Error("Image upload failed. The URL you provided may be invalid."),E=function(e,t,r){var a=f.useState(n.NONE),o=i()(a,2),u=o[0],s=o[1],d=f.useRef(null),E=f.useCallback((function(){d.current&&d.current.click()}),[d.current]),w=(0,p.BS)(y),x=(0,p.BS)("CreateUploadUrl");function N(){return O.apply(this,arguments)}function O(){return(O=l()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(n.STARTING),e.next=3,m(0);case 3:s(n.UPLOADING);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=l()(c().mark((function r(a){var i,o,u,l,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N();case 2:if(r.prev=2,x){r.next=5;break}throw new Error("Expected ".concat(y," route to exist"));case 5:return r.next=7,v(x.pathPattern,a);case 7:o=r.sent,u=o.success,l=o.payload,u&&null!=l&&null!==(i=l.value)&&void 0!==i&&i.fileId?((d=new Image).onload=function(){s(n.UPLOADED),e(l,{url:a,height:d.height,width:d.width},(function(){return s(n.NONE)}))},d.onerror=function(){t(b)},d.src=a):t(b),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),t(r.t0);case 15:case"end":return r.stop()}}),r,null,[[2,12]])})))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=l()(c().mark((function a(i){var o,u,l,d,f,p,m,v;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null==i?void 0:i[0]){a.next=3;break}return a.abrupt("return");case 3:if(u=o.name.split(".").pop(),h.has((null==u?void 0:u.toLowerCase())||"")){a.next=7;break}return r&&r(),a.abrupt("return");case 7:return a.next=9,N();case 9:if(a.prev=9,w){a.next=12;break}throw new Error("Expected ".concat(y," route to exist"));case 12:return a.next=14,g(w.pathPattern,o);case 14:d=a.sent,f=d.success,p=d.payload,f&&null!=p&&null!==(l=p.value)&&void 0!==l&&l.md5&&(m=URL.createObjectURL(o),(v=new Image).onload=function(){s(n.UPLOADED),e(p,{file:o,height:v.height,width:v.width},(function(){return s(n.NONE)}))},v.src=m),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(9),t(a.t0);case 22:case"end":return a.stop()}}),a,null,[[9,19]])})))).apply(this,arguments)}function S(){T(this.files),this.value=""}return f.useEffect((function(){if(d.current)return d.current.addEventListener("change",S),function(){d.current&&d.current.removeEventListener("change",S)}}),[d.current]),{inputRef:d,fireClick:E,status:u,handleDropEvent:function(e){var t=e.dataTransfer;t&&T(t.files)},uploadUrl:function(e){return k.apply(this,arguments)}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2514.eb9a5ab7.chunk.js.map